<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The King's Escape</title>
<style>
body { font-family: Arial; text-align: center; }
h1 { margin-top: 20px; }
#board {
  display: grid;
  grid-template-columns: repeat(8, 60px);
  grid-template-rows: repeat(8, 60px);
  margin: 20px auto;
  border: 3px solid #333;
  width: 480px;
  height: 480px;
}
.cell {
  width: 60px; height: 60px;
  display: flex; align-items: center; justify-content: center;
  font-size: 30px; cursor: pointer;
}
.white { background: #eee; }
.black { background: #555; color: white; }
.selected { outline: 3px solid yellow; }
#message { font-size: 18px; font-weight: bold; margin-top: 15px; }
button { margin-top: 10px; padding: 8px 15px; font-size: 16px; }
</style>
</head>
<body>
<h1>♔ The King's Escape ♔</h1>
<p>Guide the King from (1,1) to the exit (8,8).</p>

<div id="board"></div>
<div id="message"></div>
<button onclick="resetGame()">↺ Reset</button>

<script>
const boardSize = 8;
const boardEl = document.getElementById("board");
const messageEl = document.getElementById("message");

let kingPos = {x:0, y:7};   // King starts at (1,1) -> 0-indexed
const exitPos = {x:7, y:0}; // Exit at (8,8)
let selected = false;
let turn = 0;
let enemies = [];

// Enemy spawn array (0-indexed coordinates)
const spawnArray = [
  [],                       // Turn 0: none
  [{x:2,y:5}],              // Turn 1
  [{x:4,y:4},{x:5,y:1}],    // Turn 2
  [{x:3,y:3}]               // Turn 3
];

// Draw board with King, exit, enemies
function drawBoard() {
  boardEl.innerHTML = "";
  for (let y=0; y<boardSize; y++) {
    for (let x=0; x<boardSize; x++) {
      const cell = document.createElement("div");
      cell.classList.add("cell", (x+y)%2===0?"white":"black");

      if (kingPos.x===x && kingPos.y===y) {
        cell.textContent = "♔";
        if (selected) cell.classList.add("selected");
      } else if (exitPos.x===x && exitPos.y===y) {
        cell.textContent = "🏰";
      } else {
        const enemy = enemies.find(e=>e.x===x && e.y===y);
        if(enemy) cell.textContent="♟"; // Enemy Pawn
      }

      cell.addEventListener("click", ()=>handleClick(x,y));
      boardEl.appendChild(cell);
    }
  }
  messageEl.textContent = "Turn: " + turn;
}

// Handle King selection and movement
function handleClick(x,y) {
  if (!selected) {
    if (kingPos.x===x && kingPos.y===y) {
      selected = true;
      drawBoard();
    }
  } else {
    const dx = Math.abs(x-kingPos.x);
    const dy = Math.abs(y-kingPos.y);

    if ((dx<=1 && dy<=1) && !(dx===0 && dy===0) && !isOccupied(x,y)) {
      kingPos = {x,y};
      selected = false;
      turn++;
      spawnEnemies();
      checkWin();
      drawBoard();
    } else {
      messageEl.textContent = "❌ Invalid move!";
    }
  }
}

// Check if position occupied by enemy
function isOccupied(x,y) {
  return enemies.some(e=>e.x===x && e.y===y);
}

// Spawn new enemies for current turn
function spawnEnemies() {
  const newEnemies = spawnArray[turn] || [];
  newEnemies.forEach(e=>{
    if(!isOccupied(e.x,e.y) && !(kingPos.x===e.x && kingPos.y===e.y)) {
      enemies.push({...e});
    }
  });
}

// Check for win
function checkWin() {
  if (kingPos.x===exitPos.x && kingPos.y===exitPos.y) {
    messageEl.textContent = "🎉 You Win! The King escaped!";
  }
}

// Reset game
function resetGame() {
  kingPos = {x:0, y:7};
  selected = false;
  turn = 0;
  enemies = [];
  drawBoard();
}

drawBoard();
</script>
</body>
</html>



